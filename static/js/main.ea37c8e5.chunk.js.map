{"version":3,"sources":["components/Table/Table.styled.ts","components/Table/Table.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Row","styled","tr","Cell","td","TableContainer","div","TableControls","ButtonsContainer","PageButton","button","props","current","css","StyledHeader","th","StyledTable","table","Arrow","span","TableContext","React","createContext","undefined","Pagination","maxPageNumber","currentPage","Consumer","context","onClick","setPage","map","page","page_idx","Search","autoFocus","type","value","searchQuery","onChange","e","setSearchQuery","target","LimitSelection","limit","setLimit","Header","SortState","children","columnIndex","rows","setRows","useState","NOT_SORTED","sortState","setSortState","sorted","sort","a","b","ASCENDING","reverse","DESCENDING","Array","from","Table","header","data","Math","ceil","length","setMaxPageNumber","getSearchResults","useCallback","array","filter","row","join","toLowerCase","indexOf","replaceAll","trim","useEffect","Provider","index","start","min","max","end","slice","getPageSlice","row_idx","cell","cell_idx","Container","App","names","emails","cities","chooseRandom","floor","random","keys","i","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ea37c8e5.chunk.js","sourcesContent":["import styled, {css} from \"styled-components\";\nimport {IPageButton} from \"./Table.d\";\n\nexport const Row = styled.tr`\n  border: 1px solid #eaeaea;\n\n  &:nth-child(even) {\n    background: #fafafa;\n  }\n`;\n\nexport const Cell = styled.td`\n  padding: 5px 10px;\n`;\n\nexport const TableContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nexport const TableControls = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  margin-bottom: 10px;\n`;\n\nexport const ButtonsContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n`;\n\nexport const PageButton = styled.button<IPageButton>`\n  background: none;\n  outline: none;\n  border: none;\n  color: rgb(0, 102, 224);\n  cursor: pointer;\n  font-weight: bold;\n  border-radius: 5px;\n\n  ${props => props.current && css`\n    background: rgb(0, 102, 224);\n    color: white;\n  `}\n`;\n\nexport const StyledHeader = styled.th`\n  background: rgb(0, 102, 224);\n  padding: 10px 15px;\n  color: white;\n  cursor: pointer;\n`;\n\nexport const StyledTable = styled.table`\n  border-collapse: collapse;\n`;\n\nexport const Arrow = styled.span`\n  font-size: 10px;\n`;","import React, {useCallback, useEffect, useState} from \"react\";\nimport {IHeader, IPagination, ITable, ITableContext} from \"./Table.d\";\nimport {\n  Row,\n  TableControls,\n  TableContainer,\n  Cell,\n  PageButton,\n  ButtonsContainer,\n  StyledHeader,\n  StyledTable,\n  Arrow,\n} from './Table.styled';\n\nconst TableContext = React.createContext<ITableContext | undefined>(undefined);\n\nfunction Pagination({maxPageNumber, currentPage}: IPagination) {\n  return (\n    <TableContext.Consumer>\n      {context => maxPageNumber >= 2 && <ButtonsContainer>\n        <PageButton current={currentPage === 1} onClick={() => context?.setPage(1)}>1</PageButton>\n\n        {currentPage - 2 > 1 && <span>...</span>}\n\n        {[currentPage - 1, currentPage, currentPage + 1].map((page, page_idx) => {\n          return page > 1 && page < maxPageNumber &&\n            <PageButton key={page_idx} current={page === currentPage}\n                        onClick={() => context?.setPage(page)}>{page}</PageButton>;\n        })}\n\n        {currentPage + 2 < maxPageNumber && <span>...</span>}\n\n        <PageButton current={currentPage === maxPageNumber}\n                    onClick={() => context?.setPage(maxPageNumber)}>{maxPageNumber}</PageButton>\n      </ButtonsContainer>}\n    </TableContext.Consumer>\n  );\n}\n\nfunction Search() {\n  return (\n    <TableContext.Consumer>\n      {context =>\n        <div>\n          <span>Поиск: </span>\n          <input autoFocus type={'text'} value={context?.searchQuery}\n                 onChange={(e) => context?.setSearchQuery(e.target.value)}/>\n        </div>\n      }\n    </TableContext.Consumer>\n  );\n}\n\nfunction LimitSelection() {\n  return (\n    <TableContext.Consumer>\n      {context =>\n        <div>\n          <span>Кол-во строк на странице:&nbsp;</span>\n          <select value={context?.limit} onChange={(e) => context?.setLimit(+e.target.value)}>\n            <option value={10}>10</option>\n            <option value={20}>20</option>\n            <option value={30}>30</option>\n            <option value={50}>50</option>\n          </select>\n        </div>\n      }\n    </TableContext.Consumer>\n  );\n}\n\nfunction Header({children, columnIndex, rows, setRows}: IHeader) {\n  enum SortState {\n    NOT_SORTED,\n    ASCENDING,\n    DESCENDING,\n  }\n\n  const [sortState, setSortState] = useState(SortState.NOT_SORTED);\n\n  const sort = () => {\n    let sorted = rows.sort((a, b) => a[columnIndex] < b[columnIndex] ? -1 : 1);\n\n    if (sortState === SortState.ASCENDING) {\n      sorted = sorted.reverse();\n    }\n\n    setSortState(sortState === SortState.ASCENDING ? SortState.DESCENDING : SortState.ASCENDING);\n\n    setRows(Array.from(sorted));\n  };\n\n  return (\n    <StyledHeader onClick={sort}>\n      {sortState === SortState.ASCENDING && <Arrow>▼</Arrow>}\n      {sortState === SortState.DESCENDING && <Arrow>▲</Arrow>}\n      &nbsp;\n      {children}\n    </StyledHeader>\n  );\n}\n\nfunction Table({header, data}: ITable) {\n  const [rows, setRows] = useState(data);\n  const [limit, setLimit] = useState(10);\n  const [page, setPage] = useState(1);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [maxPageNumber, setMaxPageNumber] = useState(Math.ceil(data.length / limit));\n\n  const getPageSlice = (array: any[][]): any[][] => {\n    const start = Math.min(array.length, Math.max(0, (page - 1) * limit));\n    const end = Math.min(array.length, Math.max(0, page * limit));\n\n    return array.slice(start, end);\n  };\n\n  const getSearchResults = useCallback((array: any[][]) => {\n    return array.filter(row => row.join(' ').toLowerCase().indexOf(searchQuery.replaceAll(/\\s+/g, ' ').toLowerCase().trim()) !== -1);\n  }, [searchQuery]);\n\n  useEffect(() => {\n    setPage(1);\n  }, [maxPageNumber]);\n\n  useEffect(() => {\n    setMaxPageNumber(Math.ceil(getSearchResults(rows).length / limit));\n  }, [rows, searchQuery, limit, getSearchResults]);\n\n  return (\n    <TableContainer>\n      <TableControls>\n        <TableContext.Provider value={{\n          page,\n          setPage,\n          limit,\n          setLimit,\n          searchQuery,\n          setSearchQuery,\n        }}>\n          <Search/>\n          <LimitSelection/>\n          <Pagination maxPageNumber={maxPageNumber} currentPage={page}/>\n        </TableContext.Provider>\n      </TableControls>\n\n      <StyledTable>\n        <thead>\n        <tr>{header.map((value, index) => <Header key={index} columnIndex={index} rows={rows}\n                                                  setRows={setRows}>{value}</Header>)}</tr>\n        </thead>\n\n        <tbody>\n        {getPageSlice(getSearchResults(rows)).map((row, row_idx) =>\n          <Row key={row_idx}>\n            {row.map((cell, cell_idx) =>\n              <Cell key={cell_idx}>{cell}</Cell>\n            )}\n          </Row>\n        )}\n        </tbody>\n      </StyledTable>\n    </TableContainer>\n  );\n}\n\nexport default Table;","import React from 'react';\nimport Table from \"./components/Table/Table\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 50px;\n`;\n\nfunction App() {\n  const names = [\n    'Петров Иван Сергеевич',\n    'Куценко Михаил Юрьевич',\n    'Бондаренко Валентин Ильич',\n    'Антонов Владимир Владимирович',\n    'Иванов Иван Иванович'\n  ];\n\n  const emails = [\n    'example@mail.ru',\n    'mmm@gmail.com',\n    '123qwerty@yandex.ru',\n    'main@mail.ru'\n  ];\n\n  const cities = ['Белгород', 'Воронеж', 'Москва', 'Санкт-Петербург'];\n\n  const chooseRandom = (array: any[]) => {\n    return array[Math.floor(Math.random() * (array.length - 1))];\n  };\n\n  const header = [\n    '#',\n    'ФИО',\n    'E-Mail',\n    'Возраст',\n    'Город',\n  ]\n\n  const data = Array.from(Array(171).keys()).map(i => [\n    i + 1,\n    chooseRandom(names),\n    chooseRandom(emails),\n    Math.floor(Math.random() * 30 + 20),\n    chooseRandom(cities),\n  ])\n\n  return (\n    <Container>\n      <Table header={header} data={data} />\n    </Container>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}